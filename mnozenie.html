<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tabliczka mno≈ºenia ‚Äì ƒáwiczenia</title>
<style>
body{font-family:Arial,sans-serif;background:#f2f7ff;margin:0;padding:0}
header{background:#4caf50;color:#fff;padding:15px;text-align:center}
.hidden{display:none}
#menu,#game,#quiz,#summary{padding:20px}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
.tile{background:#fff;padding:20px;border-radius:12px;text-align:center;font-size:18px;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2)}
.tile:hover{background:#e8f5e9}
.answers button{margin:8px;padding:12px 18px;font-size:18px;border-radius:10px;border:none;background:#90caf9;cursor:pointer}
.answers button:hover{background:#64b5f6}
input[type=number]{font-size:18px;padding:8px;width:100px}
.stats{background:#fff;padding:15px;border-radius:12px}
</style>
</head>
<body>
<header>
<h1>Tabliczka mno≈ºenia do 100</h1>
<p>ƒÜwiczenia</p>
</header>

<div id="menu">
  <div class="grid">
    <div class="tile" onclick="startGame('tiles')">üß© Kafelki</div>
    <div class="tile" onclick="startGame('input')">‚úèÔ∏è Wpisywanie wyniku</div>
    <div class="tile" onclick="startQuiz()">üìù Kartk√≥wka 15 min</div>
  </div>
</div>

<div id="game" class="hidden">
  <h2 id="question"></h2>
  <div class="answers" id="answers"></div>
  <div id="inputBox" class="hidden">
    <input type="number" id="userInput" />
    <button onclick="checkInput()">OK</button>
  </div>
  <p>Poprawne odpowiedzi: <span id="points">0</span></p>
  <p>Czas odpowiedzi: <span id="time">0</span> s</p>
  <button onclick="endGame()">Zako≈Ñcz</button>
</div>

<div id="summary" class="hidden">
  <h2>Koniec</h2>
  <div class="stats" id="stats"></div>
  <button onclick="location.reload()">Menu</button>
</div>

<div id="quiz" class="hidden">
  <h2>Kartk√≥wka (20 zada≈Ñ / 15 minut)</h2>
  <div id="quizQuestion"></div>
  <input type="number" id="quizInput" />
  <button onclick="nextQuiz()">Dalej</button>
  <p id="quizInfo"></p>
</div>

<script>
let a,b,correct,mode,startTime,points=0;
let wrongStats={};

let quizTasks=[],quizIndex=0,quizCorrect=0,quizStart;

function randTask(){a=Math.ceil(Math.random()*10);b=Math.ceil(Math.random()*10);correct=a*b;}

function startGame(m){
  mode=m;points=0;wrongStats={};
  document.getElementById('menu').classList.add('hidden');
  document.getElementById('game').classList.remove('hidden');
  nextTask();
}

function nextTask(){
  randTask();
  startTime=Date.now();
  document.getElementById('question').innerText=`${a} √ó ${b} = ?`;
  document.getElementById('answers').innerHTML='';
  document.getElementById('inputBox').classList.add('hidden');

  if(mode==='tiles'){
    let opts=[correct];
    while(opts.length<4){let r=Math.ceil(Math.random()*100);if(!opts.includes(r))opts.push(r);}
    opts.sort(()=>Math.random()-0.5);
    opts.forEach(o=>{let btn=document.createElement('button');btn.innerText=o;btn.onclick=()=>check(o);document.getElementById('answers').appendChild(btn);});
  } else {
    document.getElementById('inputBox').classList.remove('hidden');
  }
}

function check(ans){
  let t=(Date.now()-startTime)/1000;
  document.getElementById('time').innerText=t.toFixed(1);
  if(ans===correct){points++;}
  else{let k=`${a}x${b}`;wrongStats[k]=(wrongStats[k]||0)+1;}
  document.getElementById('points').innerText=points;
  setTimeout(nextTask,300);
}

function checkInput(){let v=parseInt(document.getElementById('userInput').value);document.getElementById('userInput').value='';check(v);}

function endGame(){
  document.getElementById('game').classList.add('hidden');
  document.getElementById('summary').classList.remove('hidden');
  let hard=Object.entries(wrongStats).sort((a,b)=>b[1]-a[1]).slice(0,5);
  document.getElementById('stats').innerHTML=
    `<p>Poprawne odpowiedzi: ${points}</p>`+
    `<p>Najtrudniejsze zadania:</p><ul>`+
    hard.map(h=>`<li>${h[0]} ‚Äì ${h[1]} b≈Çƒôdy</li>`).join('')+
    `</ul>`;
}

function startQuiz(){
  document.getElementById('menu').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  quizTasks=[];quizIndex=0;quizCorrect=0;quizStart=Date.now();
  for(let i=0;i<20;i++){let x=Math.ceil(Math.random()*10),y=Math.ceil(Math.random()*10);quizTasks.push([x,y,x*y]);}
  showQuiz();
}

function showQuiz(){
  if(quizIndex>=20||(Date.now()-quizStart)>900000){endQuiz();return;}
  let q=quizTasks[quizIndex];
  document.getElementById('quizQuestion').innerText=`${quizIndex+1}. ${q[0]} √ó ${q[1]} = ?`;
  document.getElementById('quizInfo').innerText=`Pozosta≈Ço: ${20-quizIndex}`;
  document.getElementById('quizInput').value='';
}

function nextQuiz(){let v=parseInt(document.getElementById('quizInput').value);if(v===quizTasks[quizIndex][2])quizCorrect++;quizIndex++;showQuiz();}

function endQuiz(){
  document.getElementById('quiz').innerHTML=
    `<h2>Koniec kartk√≥wki</h2>`+
    `<p>Wynik: ${quizCorrect}/20</p>`+
    `<p>Czas: ${((Date.now()-quizStart)/60000).toFixed(1)} min</p>`+
    `<button onclick=\"location.reload()\">Menu</button>`;
}
</script>
</body>
</html>
